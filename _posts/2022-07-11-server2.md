---
layout: post
title: "Server setting 2"
subtitle: "방화벽설정 / document root 지정/ 설정"
date: 2022-07-11 17:11:03 -0400
background: '/img/posts/react_bg3.jpg'
tags: [server, php]
---
* root 계정 혹은 sudo 권한 계정으로 진행

### 1. 방화벽 삭제 및 재설치

<br>

* 설치상태 확인
``` bash
[root@centos7 ~]# yum list installed firewalld
```

<br>

* 방화벽 삭제 및 재설치
``` bash
[root@centos7 ~]# yum remove firewalld.noarch
[root@centos7 ~]# yum install firewalld
```

<br>

* 방화벽 시작 및 상태확인
``` bash
[root@centos7 ~]# systemctl start firewalld
[root@centos7 ~]# firewall-cmd --state
```
<img src="/img/work/firewall_state.png" width="100%" height="100%"> 	

<br>
<br>

### 2. 방화벽 세팅

<br>

* 서비스 허용
``` bash
[root@centos7 ~]# firewall-cmd --add-service=dns --zone=public --permanent
[root@centos7 ~]# firewall-cmd --add-service=http --zone=public --permanent
[root@centos7 ~]# firewall-cmd --add-service=https --zone=public --permanent
[root@centos7 ~]# firewall-cmd --add-service=imaps --zone=public --permanent
[root@centos7 ~]# firewall-cmd --add-service=smtps --zone=public --permanent
[root@centos7 ~]# firewall-cmd --add-service=smtp --zone=public --permanent
[root@centos7 ~]# firewall-cmd --add-service=samba --zone=public --permanent
[root@centos7 ~]# firewall-cmd --permanent --zone=public --add-service=ftp
```

<br>

* 포트 허용
``` bash
[root@centos7 ~]# firewall-cmd --permanent --zone=public --add-port=80/tcp
[root@centos7 ~]# firewall-cmd --zone=public --permanent --add-port=22/tcp
[root@centos7 ~]# firewall-cmd --zone=public --permanent --add-port=21/tcp
```

<br>

* 재시작
``` bash
[root@centos7 ~]# firewall-cmd --reload
```

<br>
<br>

### 3. FTP 

<br>

* vsftpd 설치
``` bash
[root@hostnamelinux-211 ~]# yum -y install vsftpd
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirror.navercorp.com
 * epel: ftp.riken.jp
 * extras: mirror.navercorp.com
 * remi-php74: ftp.riken.jp
 * remi-safe: ftp.riken.jp
 * updates: mirror.anigil.com
Resolving Dependencies
--> Running transaction check
---> Package vsftpd.x86_64 0:3.0.2-29.el7_9 will be installed
--> Finished Dependency Resolution

Dependencies Resolved
...

```

